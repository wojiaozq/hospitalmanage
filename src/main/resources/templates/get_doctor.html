<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="static/h-ui/css/H-ui.min.css" />
		<title>修改医生</title>
	</head>
	<body>
		
			<form class="form form-horizontal" id="form-article-add">
				<input type="text" hidden="hidden" th:value="${d.id}"  id="id" name="id">
				<div class="row cl">
					<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>医生姓名：</label>
					<div class="formControls col-sm-3">
						<input type="text" th:value="${d.name}" class="input-text" placeholder="" id="name" name="name">
					</div>
					<label class="form-label col-xs-1 col-sm-2"><span class="c-red">*</span>性别：</label>
					<div class="formControls col-xs-2 col-sm-3">
						 <span class="select-box">
				                    <select name="sex" class="select" id="sex">
				                	<option value="男">男</option>
				                	<option value="女" >女</option>
				                </select></span>
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>出生年月：</label>
					<div class="formControls col-sm-3">
						<input type="text" class="input-text" th:value="${#dates.format(d.birthday, 'yyyy/MM/dd')}" placeholder="" id="birthday" name="birthday">
					</div>
					<label class="form-label col-xs-1 col-sm-2"><span class="c-red">*</span>年龄：</label>
					<div class="formControls col-xs-2 col-sm-3">
						<input type="text" class="input-text" th:value="${d.age}" placeholder="" id="age" name="age">
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>入职时间：</label>
					<div class="formControls col-sm-3">
						<input type="text" class="input-text" th:value="${#dates.format(d.entryTime, 'yyyy/MM/dd')}"  placeholder="" id="entryTime" name="entryTime">
					</div>
					<label class="form-label col-xs-1 col-sm-2"><span class="c-red">*</span>职称：</label>
					<div class="formControls col-xs-2 col-sm-3">
						<span class="select-box">
				                    <select class="select" id="job" name="job">
				                	<option value="主治医生">主治医生</option>
				                	<option value="专家" >专家</option>
									<option value="教授" >教授</option>
									<option value="副教授" >副教授</option>
				                </select></span>
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>所属科室：</label>
					<div class="formControls col-sm-3">
						<span class="select-box"  >
				<select id="administrativeId"  name="administrativeId" class="select" >
					<!--<option>请选择</option>-->
					<option th:value="${d.administrativeId}" th:text="${d.administrativeName}"></option>
				</select>
				</span>
					</div>
					<label class="form-label col-sm-2"><span class="c-red">*</span>擅长项目：</label>
					<div class="formControls col-xs-2 col-sm-3">
						<input type="text" class="input-text" th:value="${d.goodProject}" placeholder="" id="goodProject" name="goodProject">
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>联系方式：</label>
					<div class="formControls col-sm-3">
						<input type="text" class="input-text" th:value="${d.tel}" placeholder="" id="tel" name="tel">
					</div>
					<label class="form-label col-xs-1 col-sm-2"><span class="c-red">*</span>家庭住址：</label>
					<div class="formControls col-xs-2 col-sm-3">
						<input type="text" class="input-text" th:value="${d.address}" placeholder="" id="address" name="address">
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>身份证号：</label>
					<div class="formControls col-sm-3">
						<input type="text" class="input-text"  th:value="${d.username}"  readonly="readonly" placeholder="" id="username" name="username" aria-readonly="true">
					</div>
					<label class="form-label col-xs-1 col-sm-2"><span class="c-red">*</span>登录密码：</label>
					<div class="formControls col-xs-2 col-sm-3">
						<input type="password" class="input-text"  th:value="${d.password}" placeholder="" id="password" name="password">
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>毕业学校：</label>
					<div class="formControls col-sm-3">
						<input type="text" class="input-text"  th:value="${d.graduationSchool}" placeholder="" id="graduationSchool" name="graduationSchool">
					</div>
					<label class="form-label col-xs-1 col-sm-2"><span class="c-red">*</span>学历：</label>
					<div class="formControls col-xs-2 col-sm-3">
						<input type="text" class="input-text"  th:value="${d.education}" placeholder="" id="education" name="education">
					</div>
				</div>
				<div class="row cl">
					<div class="formControls col-sm-3"></div>
					<div class="formControls col-sm-2">
					<button  id="save" class="btn btn-primary radius" type="button">修改</button>
					</div>
					<div class="formControls col-xs-2 col-sm-2">
					<button  class="btn btn-default radius" type="reset">&nbsp;&nbsp;清空&nbsp;&nbsp;</button>
					</div><!--onClick="article_save_submit();"   onClick="removeIframe();" --->
				</div>				
			</form>
	</center>

		<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
		<script type="text/javascript" src="lib/layer/2.1/layer.js"></script>
		<script type="text/javascript" src="static/h-ui/js/H-ui.js"></script>
	</body>
	<script>
        $(document).ready(function(){

            $.get("administrative/getAll",function(data,status){
				var str = "";
                 for (var i=0;i<data.length;++i){
                     str +="<option value=\""+data[i].id+"\">"+data[i].name+"</option>";
				 }
				$('#administrativeId').append(str);

            });
            $('#save').click(function () {
                var data = getData(); //eval('('+getData()+')');

				var tel=$("#tel").val();
				var username=$("#username").val();
				var name=$("#name").val();
				var job=$("#job").val();
				var entryTime=$("#entryTime").val();
				var age=$("#age").val();
				var birthday=$("#birthday").val();
				var graduationSchool=$("#graduationSchool").val();
				var administrativeId=$("#administrativeId").val();
				var goodProject=$("#goodProject").val();
				var education=$("#education").val();
				var password=$("#password").val();
				if(name.length==0||job.length==0||entryTime.length==0||age.length==0||birthday.length==0||graduationSchool.length==0||goodProject.length==0||education.length==0||password.length==0){
					alert("所有信息都必须填写，不能为空");
					return false;
				}if (tel.length!=11) {
					alert("请输入11位手机号码");
					return false;
				}else{
					$.post('doctor/update',data,function (data,status) {
						if(data=="success"){
							layer.alert('修改成功',function () {
								window.parent.location.reload();
								var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
								parent.layer.close(index); //再执行关闭

							});

						}
					})
				}

            });
            function getData() {
                 var data = "";// = '{';
                 data += "username="+ $('#username').val()+'&';
                data += "id="+ $('#id').val()+'&';
                data += "name="+ $('#name').val()+'&';
                data += "job="+ $('#job').val()+'&';
                data += "entryTime="+ $('#entryTime').val()+'&';
                data += "age="+ $('#age').val()+'&';
                data += "sex="+ $('#sex').val()+'&';
                data += "birthday="+ $('#birthday').val()+'&';
                data += "graduationSchool="+ $('#graduationSchool').val()+'&';
                data += "administrativeId="+ $('#administrativeId').val()+'&';
                data += "goodProject="+ $('#goodProject').val()+'&';
                data += "tel="+ $('#tel').val()+'&';
                data += "address="+ $('#address').val()+'&';
                data += "education="+ $('#education').val()+'&';
                data += "password="+ $('#password').val();
                // data += '}';
                return data;

            }
        });

	</script>


</html>